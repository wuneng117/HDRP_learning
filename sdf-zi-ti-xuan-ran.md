---
description: >-
  原理上，Signed Distance Field 直譯為「帶信號的距離場」。它在圖像中儲存了空間中的各個 Point 到圖像輪廓之間的距離，Signed
  這邊指的是正負信號，如果 Point 在圖像內為負值，在外側則為正值。
---

# SDF字体渲染

Unity的文本最终解决方案TextMeshPro效率高，而且可以实现各种效果，可以同时用在3d场景中和2dUI里，其原理就是用户SDF去做字体渲染。

原理讲解比较清楚是[这篇文章](https://medium.com/codememo/spark-ar-%E5%AF%A6%E4%BD%9C-sdf-shader-%E4%B8%8A-b0864938df3b)的前半部分。

在理解原理基础上，可以看[这篇文章](https://zhuanlan.zhihu.com/p/26217154)，从”论文里面的干货“开始。

字体显示32，从上到下依次是Textmeshpro24，Textmeshpro32，Text32，Text24放大1.3倍，效果

好的程度为3>2>1>4

<img src=".gitbook/assets/image (3).png" alt="" data-size="original">



tips：

* 原理就是利用像素着色器的线性插值（每个texture2d函数取值，都是插值对应位置上下左右4个纹素算出）。想测试的话就新建1个3x1像素的图片，周围留1像素透明区域（如果效果有问题剋有这么做，防止预乘ALPHA的影响，不过不确定哈），从上到下分别为红、黑、白，放入游戏中放大后可以看到，上半部分红到黑，下班部分黑到白，可以得出是在位置的上下2个像素做插值。
* 一般的字体通过设置比较大的size，然后缩放0.5倍是可以显示更清楚。因为大的size表示像素多，缩放0.5倍，但是有二次取样，所以会更清晰。但是sdf是没有这个效果的，因为比较大的size也是通过sdf计算出来的，缩放0.5倍并不会清晰（仅猜测没具体计算过哈）。sdf字体如果想更清晰，在取样时取更大的size就行
* 取样字号大小也影响同样倍数的效果：测试了24-32的，基本放大到1.5倍左右就有点明显字虚了；更大的初步测试下来，如果我设置64，就算放大到640也比较清晰
* 从这个字体发虚来看，4k显示器上的字是否也是这个sdf的原因发虚？
